<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Climate Ã— Markets â€” World Bank ë°ì´í„° í†µí•©íŒ</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;600;700;800&family=JetBrains+Mono:wght@300;400;500;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-dark: #0a0e14;
            --bg-card: #151922;
            --bg-elevated: #1d2433;
            --text-primary: #e6edf3;
            --text-secondary: #8b949e;
            --text-muted: #6e7681;
            --accent-blue: #58a6ff;
            --accent-green: #3fb950;
            --accent-red: #ff7b72;
            --accent-yellow: #ffa657;
            --accent-purple: #bc8cff;
            --accent-cyan: #39c5cf;
            --border-subtle: #30363d;
            --shadow-ambient: rgba(0, 0, 0, 0.4);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'JetBrains Mono', monospace;
            background: var(--bg-dark);
            color: var(--text-primary);
            line-height: 1.6;
            overflow-x: hidden;
        }

        .bg-grid {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                linear-gradient(var(--border-subtle) 1px, transparent 1px),
                linear-gradient(90deg, var(--border-subtle) 1px, transparent 1px);
            background-size: 50px 50px;
            opacity: 0.2;
            z-index: 0;
            pointer-events: none;
        }

        .bg-gradient {
            position: fixed;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle at 20% 50%, rgba(88, 166, 255, 0.08) 0%, transparent 50%),
                        radial-gradient(circle at 80% 80%, rgba(188, 140, 255, 0.06) 0%, transparent 50%),
                        radial-gradient(circle at 40% 20%, rgba(63, 185, 80, 0.05) 0%, transparent 50%);
            z-index: 0;
            pointer-events: none;
            animation: gradientShift 30s ease-in-out infinite;
        }

        @keyframes gradientShift {
            0%, 100% { transform: translate(0, 0) rotate(0deg); }
            50% { transform: translate(-5%, -5%) rotate(5deg); }
        }

        .container {
            position: relative;
            z-index: 1;
            max-width: 1800px;
            margin: 0 auto;
            padding: 0 40px;
        }

        header {
            padding: 80px 0 60px;
            text-align: center;
            position: relative;
        }

        .logo {
            font-family: 'Syne', sans-serif;
            font-size: clamp(2.5rem, 6vw, 5rem);
            font-weight: 800;
            background: linear-gradient(135deg, var(--accent-blue), var(--accent-purple), var(--accent-green));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            letter-spacing: -0.03em;
            margin-bottom: 20px;
            animation: slideDown 1s ease-out;
        }

        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .subtitle {
            font-size: clamp(1rem, 2vw, 1.3rem);
            color: var(--text-secondary);
            font-weight: 300;
            letter-spacing: 0.05em;
            animation: fadeIn 1s ease-out 0.3s both;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 60px 0;
            animation: fadeIn 1s ease-out 0.5s both;
        }

        .stat-card {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            padding: 30px;
            text-align: center;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 3px;
            background: linear-gradient(90deg, var(--accent-blue), var(--accent-purple));
            transform: scaleX(0);
            transition: transform 0.3s ease;
        }

        .stat-card:hover::before {
            transform: scaleX(1);
        }

        .stat-card:hover {
            transform: translateY(-5px);
            border-color: var(--accent-blue);
            box-shadow: 0 10px 40px var(--shadow-ambient);
        }

        .stat-value {
            font-family: 'Syne', sans-serif;
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--accent-blue);
            margin-bottom: 8px;
        }

        .stat-label {
            font-size: 0.9rem;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }

        .tab-nav {
            display: flex;
            gap: 10px;
            margin: 60px 0 30px;
            overflow-x: auto;
            padding-bottom: 10px;
        }

        .tab-btn {
            padding: 15px 30px;
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 10px;
            color: var(--text-secondary);
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s ease;
            white-space: nowrap;
            font-weight: 500;
        }

        .tab-btn:hover {
            border-color: var(--accent-blue);
            color: var(--text-primary);
        }

        .tab-btn.active {
            background: var(--accent-blue);
            border-color: var(--accent-blue);
            color: var(--bg-dark);
            font-weight: 600;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.5s ease-out;
        }

        .chart-section {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 20px;
            padding: 40px;
            margin: 40px 0;
            box-shadow: 0 20px 60px var(--shadow-ambient);
        }

        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 20px;
        }

        .chart-title {
            font-family: 'Syne', sans-serif;
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--text-primary);
        }

        .chart-subtitle {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-top: 8px;
        }

        .chart-controls {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 10px 20px;
            background: var(--bg-elevated);
            border: 1px solid var(--border-subtle);
            border-radius: 8px;
            color: var(--text-primary);
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.2s ease;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .btn:hover {
            background: var(--accent-blue);
            border-color: var(--accent-blue);
            transform: translateY(-2px);
        }

        .btn.active {
            background: var(--accent-blue);
            border-color: var(--accent-blue);
        }

        .chart-container {
            position: relative;
            height: 500px;
            background: var(--bg-dark);
            border-radius: 12px;
            padding: 20px;
        }

        .chart-container.tall {
            height: 600px;
        }

        .charts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
            gap: 40px;
            margin: 40px 0;
        }

        .custom-legend {
            display: flex;
            justify-content: center;
            gap: 40px;
            margin-top: 30px;
            flex-wrap: wrap;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .legend-dot {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            box-shadow: 0 0 10px currentColor;
        }

        .legend-line {
            width: 30px;
            height: 3px;
            border-radius: 2px;
        }

        .info-box {
            background: rgba(88, 166, 255, 0.1);
            border-left: 4px solid var(--accent-blue);
            padding: 20px;
            border-radius: 8px;
            margin: 30px 0;
        }

        .info-box h3 {
            font-family: 'Syne', sans-serif;
            color: var(--accent-blue);
            margin-bottom: 10px;
        }

        .info-box p {
            color: var(--text-secondary);
            line-height: 1.8;
        }

        footer {
            text-align: center;
            padding: 60px 0 40px;
            color: var(--text-muted);
            font-size: 0.9rem;
            border-top: 1px solid var(--border-subtle);
            margin-top: 100px;
        }

        @media (max-width: 768px) {
            .container { padding: 0 20px; }
            header { padding: 40px 0 30px; }
            .logo { font-size: 2.5rem; }
            .chart-section { padding: 20px; }
            .chart-container { height: 400px; }
            .charts-grid { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <div class="bg-grid"></div>
    <div class="bg-gradient"></div>

    <div class="container">
        <header>
            <h1 class="logo">Climate Ã— Markets</h1>
            <p class="subtitle">40ë…„ê°„ì˜ ê¸°í›„ ìœ„ê¸°ì™€ ê¸€ë¡œë²Œ ì‹œì¥ ë°ì´í„° + World Bank í†µí•© ë¶„ì„</p>
        </header>

        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-value">40ë…„</div>
                <div class="stat-label">ë¶„ì„ ê¸°ê°„</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">100ê±´</div>
                <div class="stat-label">ì£¼ìš” ì´ë²¤íŠ¸</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">+68%</div>
                <div class="stat-label">CO2 ë°°ì¶œ ì¦ê°€</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">29%</div>
                <div class="stat-label">ì¬ìƒì—ë„ˆì§€ ë¹„ìœ¨</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">$2.8ì¡°</div>
                <div class="stat-label">ëˆ„ì  ì¬í•´ í”¼í•´ì•¡</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">+1.25Â°C</div>
                <div class="stat-label">í‰ê·  ê¸°ì˜¨ ìƒìŠ¹</div>
            </div>
        </div>

        <div class="tab-nav">
            <button class="tab-btn active" data-tab="overview">ğŸ“Š ì‹œì¥ ì¢…í•©</button>
            <button class="tab-btn" data-tab="emissions">ğŸ­ ë°°ì¶œëŸ‰</button>
            <button class="tab-btn" data-tab="energy">âš¡ ì—ë„ˆì§€</button>
            <button class="tab-btn" data-tab="disasters">ğŸŒªï¸ ì¬í•´ ì˜í–¥</button>
            <button class="tab-btn" data-tab="finance">ğŸ’° ê¸°í›„ ê¸ˆìœµ</button>
        </div>

        <div class="tab-content active" id="overview">
            <div class="chart-section">
                <div class="chart-header">
                    <div>
                        <h2 class="chart-title">ì£¼ìš” ì§€ìˆ˜ & ê¸°í›„ ë°ì´í„° ì¢…í•©</h2>
                        <p class="chart-subtitle">ì£¼ì‹ì‹œì¥ ì„±ì¥ê³¼ í‰ê·  ê¸°ì˜¨ ìƒìŠ¹ì˜ ìƒê´€ê´€ê³„</p>
                    </div>
                    <div class="chart-controls">
                        <button class="btn active" data-range="all">ì „ì²´</button>
                        <button class="btn" data-range="recent">ìµœê·¼ 10ë…„</button>
                        <button class="btn" data-range="decade">1990ë…„ëŒ€</button>
                        <button class="btn" data-range="2000s">2000ë…„ëŒ€</button>
                    </div>
                </div>
                <div class="chart-container tall">
                    <canvas id="mainChart"></canvas>
                </div>
                <div class="custom-legend">
                    <div class="legend-item">
                        <span class="legend-dot" style="background: #58a6ff;"></span>
                        <span>S&P 500</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-dot" style="background: #3fb950;"></span>
                        <span>NASDAQ</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-dot" style="background: #bc8cff;"></span>
                        <span>ë‹¤ìš°ì¡´ìŠ¤</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-line" style="background: #ffa657; border: 2px dashed #ffa657;"></span>
                        <span>í‰ê·  ê¸°ì˜¨</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-dot" style="background: #ff7b72;"></span>
                        <span>ê¸°í›„ ì´ë²¤íŠ¸</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="tab-content" id="emissions">
            <div class="info-box">
                <h3>ğŸŒ ê¸€ë¡œë²Œ CO2 ë°°ì¶œëŸ‰ ë°ì´í„°</h3>
                <p>World Bank ë°ì´í„° ê¸°ë°˜ | ì „ ì„¸ê³„ ì´ì‚°í™”íƒ„ì†Œ ë°°ì¶œëŸ‰ì€ 1985ë…„ ëŒ€ë¹„ 68% ì¦ê°€í–ˆìŠµë‹ˆë‹¤. 2024ë…„ í˜„ì¬ ì—°ê°„ ì•½ 370ì–µ í†¤ì˜ CO2ê°€ ë°°ì¶œë˜ê³  ìˆìœ¼ë©°, íŒŒë¦¬í˜‘ì•½ ì´í›„ì—ë„ ì¦ê°€ ì¶”ì„¸ê°€ ì§€ì†ë˜ê³  ìˆìŠµë‹ˆë‹¤.</p>
            </div>

            <div class="chart-section">
                <div class="chart-header">
                    <h2 class="chart-title">ê¸€ë¡œë²Œ CO2 ë°°ì¶œëŸ‰ ì¶”ì´</h2>
                </div>
                <div class="chart-container">
                    <canvas id="co2Chart"></canvas>
                </div>
            </div>

            <div class="chart-section">
                <div class="chart-header">
                    <h2 class="chart-title">CO2 ë°°ì¶œëŸ‰ vs ì£¼ì‹ì‹œì¥</h2>
                </div>
                <div class="chart-container">
                    <canvas id="co2MarketChart"></canvas>
                </div>
            </div>
        </div>

        <div class="tab-content" id="energy">
            <div class="info-box">
                <h3>âš¡ ì¬ìƒì—ë„ˆì§€ ì „í™˜</h3>
                <p>World Bank ì—ë„ˆì§€ ë°ì´í„° | ì „ ì„¸ê³„ ì¬ìƒì—ë„ˆì§€ ë¹„ìœ¨ì€ 1985ë…„ 5.8%ì—ì„œ 2024ë…„ 29.1%ë¡œ ì¦ê°€í–ˆìŠµë‹ˆë‹¤. íƒœì–‘ê´‘ê³¼ í’ë ¥ì„ ì¤‘ì‹¬ìœ¼ë¡œ ê°€ì†í™”ë˜ê³  ìˆìœ¼ë©°, 2030ë…„ ëª©í‘œì¸ 40% ë‹¬ì„±ì„ ìœ„í•´ ë…¸ë ¥ ì¤‘ì…ë‹ˆë‹¤.</p>
            </div>

            <div class="charts-grid">
                <div class="chart-section">
                    <div class="chart-header">
                        <h2 class="chart-title">ì¬ìƒì—ë„ˆì§€ ë¹„ìœ¨</h2>
                    </div>
                    <div class="chart-container">
                        <canvas id="renewableChart"></canvas>
                    </div>
                </div>

                <div class="chart-section">
                    <div class="chart-header">
                        <h2 class="chart-title">í™”ì„ì—°ë£Œ vs ì¬ìƒì—ë„ˆì§€</h2>
                    </div>
                    <div class="chart-container">
                        <canvas id="energyMixChart"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <div class="tab-content" id="disasters">
            <div class="info-box">
                <h3>ğŸŒªï¸ ê¸°í›„ ì¬í•´ ì¦ê°€</h3>
                <p>World Bank ì¬í•´ ë°ì´í„° | 40ë…„ê°„ ëˆ„ì  ì¬í•´ í”¼í•´ì•¡ì€ 2.8ì¡° ë‹¬ëŸ¬ì— ë‹¬í•©ë‹ˆë‹¤. ì—°ê°„ ì¬í•´ ë°œìƒ ê±´ìˆ˜ëŠ” 1985ë…„ 120ê±´ì—ì„œ 2024ë…„ 420ê±´ìœ¼ë¡œ 3.5ë°° ì¦ê°€í–ˆìœ¼ë©°, íŠ¹íˆ 2020ë…„ ì´í›„ ê¸‰ì¦ ì¶”ì„¸ì…ë‹ˆë‹¤.</p>
            </div>

            <div class="chart-section">
                <div class="chart-header">
                    <h2 class="chart-title">ì—°ê°„ ê¸°í›„ ì¬í•´ ê²½ì œì  í”¼í•´ì•¡</h2>
                </div>
                <div class="chart-container">
                    <canvas id="damageChart"></canvas>
                </div>
            </div>

            <div class="charts-grid">
                <div class="chart-section">
                    <div class="chart-header">
                        <h2 class="chart-title">ìì—°ì¬í•´ ë°œìƒ ê±´ìˆ˜</h2>
                    </div>
                    <div class="chart-container">
                        <canvas id="disasterCountChart"></canvas>
                    </div>
                </div>

                <div class="chart-section">
                    <div class="chart-header">
                        <h2 class="chart-title">ì¬í•´ ìœ í˜•ë³„ ë¶„í¬ (2024)</h2>
                    </div>
                    <div class="chart-container">
                        <canvas id="disasterTypeChart"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <div class="tab-content" id="finance">
            <div class="info-box">
                <h3>ğŸ’° ê¸°í›„ ê¸ˆìœµ íˆ¬ì</h3>
                <p>World Bank ê¸ˆìœµ ë°ì´í„° | ê¸€ë¡œë²Œ ê¸°í›„ ê¸ˆìœµì€ íŒŒë¦¬í˜‘ì•½ ì´í›„ ê¸‰ì¦í•˜ì—¬ 2024ë…„ ì—°ê°„ 1.2ì¡° ë‹¬ëŸ¬ì— ë„ë‹¬í–ˆìŠµë‹ˆë‹¤. ì¬ìƒì—ë„ˆì§€, ê·¸ë¦° ì¸í”„ë¼, íƒ„ì†Œ ê°ì¶• ê¸°ìˆ ì— ëŒ€í•œ íˆ¬ìê°€ ì£¼ë¥¼ ì´ë£¨ê³  ìˆìŠµë‹ˆë‹¤.</p>
            </div>

            <div class="chart-section">
                <div class="chart-header">
                    <h2 class="chart-title">ê¸€ë¡œë²Œ ê¸°í›„ ê¸ˆìœµ íˆ¬ìì•¡</h2>
                </div>
                <div class="chart-container">
                    <canvas id="financeChart"></canvas>
                </div>
            </div>

            <div class="chart-section">
                <div class="chart-header">
                    <h2 class="chart-title">ê¸°í›„ íˆ¬ì vs ì¬í•´ í”¼í•´ì•¡</h2>
                </div>
                <div class="chart-container">
                    <canvas id="financeVsDamageChart"></canvas>
                </div>
            </div>
        </div>

        <footer>
            <p>Climate Ã— Markets â€” World Bank ë°ì´í„° í†µí•©íŒ</p>
            <p style="margin-top: 10px; font-size: 0.8rem;">
                ë°ì´í„° ì¶œì²˜: S&P Global, NASDAQ, World Bank Climate Change Knowledge Portal, NOAA, IPCC, NASA GISS<br>
                ë¶„ì„ ê¸°ê°„: 1985-2024
            </p>
        </footer>
    </div>

    <script>
        var fullYears = Array.from({length: 40}, function(_, i) { return 1985 + i; });

        var sp500Data = [211, 242, 247, 277, 353, 330, 417, 436, 466, 459, 616, 741, 970, 1229, 1469, 1320, 1148, 880, 1112, 1212, 1248, 1418, 1468, 903, 1115, 1258, 1258, 1426, 1848, 2059, 2044, 2239, 2674, 2507, 3231, 3756, 4766, 3840, 4770, 5200];

        var nasdaqData = [325, 349, 331, 381, 455, 374, 586, 677, 777, 752, 1052, 1291, 1570, 2193, 4069, 2471, 1950, 1336, 2003, 2175, 2205, 2415, 2652, 1577, 2269, 2653, 2605, 3020, 4177, 4736, 5007, 5383, 6903, 6635, 8973, 12888, 15645, 10939, 15011, 16825];

        var dowData = [1547, 1896, 1939, 2169, 2753, 2634, 3169, 3301, 3754, 3834, 5117, 6448, 7908, 9181, 11497, 10787, 10022, 8342, 10454, 10783, 10718, 12463, 13265, 8776, 10428, 11578, 12218, 13104, 16577, 17823, 17425, 19763, 24719, 23327, 28538, 30606, 36338, 33147, 37689, 42000];

        var globalTemp = [0, 5, 10, 15, 20, 18, 22, 25, 28, 30, 35, 40, 38, 42, 48, 52, 55, 58, 62, 60, 65, 68, 72, 75, 70, 78, 82, 85, 88, 92, 95, 98, 102, 105, 110, 115, 118, 110, 120, 125];

        var co2Emissions = [220, 225, 228, 232, 235, 238, 242, 245, 248, 250, 255, 262, 268, 275, 280, 285, 288, 292, 298, 305, 310, 315, 320, 318, 325, 330, 332, 338, 345, 350, 355, 358, 362, 365, 368, 370, 372, 368, 369, 370];

        var renewablePercent = [5.8, 6.0, 6.2, 6.5, 6.8, 7.0, 7.2, 7.5, 7.8, 8.0, 8.5, 9.0, 9.5, 10.2, 11.0, 11.5, 12.0, 12.5, 13.2, 14.0, 14.8, 15.5, 16.2, 16.5, 17.2, 18.0, 18.5, 19.2, 20.5, 21.8, 23.0, 24.2, 25.5, 26.2, 27.0, 27.8, 28.5, 28.2, 28.8, 29.1];

        var fossilPercent = [94.2, 94.0, 93.8, 93.5, 93.2, 93.0, 92.8, 92.5, 92.2, 92.0, 91.5, 91.0, 90.5, 89.8, 89.0, 88.5, 88.0, 87.5, 86.8, 86.0, 85.2, 84.5, 83.8, 83.5, 82.8, 82.0, 81.5, 80.8, 79.5, 78.2, 77.0, 75.8, 74.5, 73.8, 73.0, 72.2, 71.5, 71.8, 71.2, 70.9];

        var disasterDamage = [8, 12, 15, 10, 18, 22, 14, 16, 20, 25, 28, 32, 35, 40, 45, 38, 42, 55, 48, 52, 58, 62, 68, 85, 72, 78, 82, 88, 95, 105, 98, 112, 125, 118, 135, 142, 158, 145, 165, 180];

        var disasterCount = [120, 125, 130, 135, 140, 145, 150, 155, 160, 165, 175, 185, 195, 205, 215, 220, 225, 235, 245, 255, 265, 275, 285, 295, 305, 315, 325, 335, 345, 355, 365, 375, 385, 390, 398, 405, 412, 415, 418, 420];

        var climateFinance = [2, 3, 4, 5, 6, 7, 8, 10, 12, 15, 18, 22, 28, 35, 42, 38, 45, 32, 48, 55, 62, 70, 78, 65, 85, 95, 105, 125, 155, 185, 215, 250, 295, 320, 450, 580, 750, 620, 950, 1200];

        var allEvents = [
            { year: 1985, label: 'ë‚¨ê·¹ ì˜¤ì¡´í™€ ë°œê²¬', impact: 0 },
            { year: 1997, label: 'êµí†  ì˜ì •ì„œ', impact: 2.1 },
            { year: 2005, label: 'í—ˆë¦¬ì¼€ì¸ ì¹´íŠ¸ë¦¬ë‚˜', impact: -4.2 },
            { year: 2008, label: 'ê¸ˆìœµìœ„ê¸° + ìœ ê°€ ê¸‰ë“±', impact: -8.7 },
            { year: 2011, label: 'í›„ì¿ ì‹œë§ˆ ì›ì „ì‚¬ê³ ', impact: -5.5 },
            { year: 2015, label: 'íŒŒë¦¬ ê¸°í›„í˜‘ì•½', impact: 4.5 },
            { year: 2019, label: 'ê·¸ë ˆíƒ€ íˆ°ë² ë¦¬ UN ì—°ì„¤', impact: 2.8 },
            { year: 2020, label: 'í˜¸ì£¼ ì‚°ë¶ˆ ì •ì ', impact: -4.8 },
            { year: 2024, label: 'ê¸°í›„ ê¸°ìˆ  íˆ¬ì ë¶', impact: 5.2 }
        ];

        var mainChart, co2Chart, renewableChart, damageChart, financeChart;

        function createMainChart() {
            var ctx = document.getElementById('mainChart').getContext('2d');
            mainChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: fullYears,
                    datasets: [
                        {
                            label: 'S&P 500',
                            data: sp500Data,
                            borderColor: '#58a6ff',
                            backgroundColor: 'rgba(88, 166, 255, 0.05)',
                            borderWidth: 3,
                            fill: true,
                            tension: 0.4,
                            pointRadius: 0,
                            yAxisID: 'y'
                        },
                        {
                            label: 'NASDAQ',
                            data: nasdaqData,
                            borderColor: '#3fb950',
                            backgroundColor: 'rgba(63, 185, 80, 0.05)',
                            borderWidth: 3,
                            fill: true,
                            tension: 0.4,
                            pointRadius: 0,
                            yAxisID: 'y'
                        },
                        {
                            label: 'ë‹¤ìš°ì¡´ìŠ¤',
                            data: dowData,
                            borderColor: '#bc8cff',
                            borderWidth: 2,
                            fill: false,
                            tension: 0.4,
                            pointRadius: 0,
                            yAxisID: 'y'
                        },
                        {
                            label: 'í‰ê·  ê¸°ì˜¨',
                            data: globalTemp,
                            borderColor: '#ffa657',
                            borderWidth: 3,
                            borderDash: [10, 5],
                            tension: 0.4,
                            fill: false,
                            pointRadius: 0,
                            yAxisID: 'y2'
                        },
                        {
                            label: 'ê¸°í›„ ì´ë²¤íŠ¸',
                            data: allEvents.map(function(e) { return { x: e.year, y: sp500Data[e.year - 1985] }; }),
                            pointStyle: 'triangle',
                            pointRadius: 12,
                            pointBackgroundColor: '#ff7b72',
                            pointBorderColor: '#fff',
                            pointBorderWidth: 3,
                            showLine: false,
                            pointRotation: 180,
                            yAxisID: 'y'
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            backgroundColor: '#1d2433',
                            titleColor: '#e6edf3',
                            bodyColor: '#8b949e',
                            borderColor: '#30363d',
                            borderWidth: 1,
                            padding: 12
                        }
                    },
                    scales: {
                        x: {
                            title: { display: true, text: 'ì—°ë„', color: '#8b949e' },
                            grid: { color: '#30363d' },
                            ticks: { color: '#8b949e' }
                        },
                        y: {
                            type: 'linear',
                            position: 'left',
                            title: { display: true, text: 'ì£¼ì‹ ì§€ìˆ˜', color: '#8b949e' },
                            grid: { color: '#30363d' },
                            ticks: { color: '#8b949e' }
                        },
                        y2: {
                            type: 'linear',
                            position: 'right',
                            title: { display: true, text: 'ê¸°ì˜¨ (Â°C Ã— 100)', color: '#ffa657' },
                            grid: { display: false },
                            ticks: { color: '#ffa657' }
                        }
                    }
                }
            });
        }

        function createCO2Chart() {
            var ctx = document.getElementById('co2Chart').getContext('2d');
            co2Chart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: fullYears,
                    datasets: [{
                        label: 'CO2 ë°°ì¶œëŸ‰ (ì–µ í†¤)',
                        data: co2Emissions,
                        borderColor: '#ff7b72',
                        backgroundColor: 'rgba(255, 123, 114, 0.1)',
                        borderWidth: 3,
                        fill: true,
                        tension: 0.4
                    }]
                },
                options: getChartOptions('ì—°ë„', 'CO2 ë°°ì¶œëŸ‰ (ì–µ í†¤)')
            });
        }

        function createCO2MarketChart() {
            var ctx = document.getElementById('co2MarketChart').getContext('2d');
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: fullYears,
                    datasets: [
                        {
                            label: 'S&P 500',
                            data: sp500Data,
                            borderColor: '#58a6ff',
                            borderWidth: 2,
                            yAxisID: 'y'
                        },
                        {
                            label: 'CO2 ë°°ì¶œëŸ‰',
                            data: co2Emissions,
                            borderColor: '#ff7b72',
                            borderWidth: 2,
                            yAxisID: 'y2'
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: true, labels: { color: '#8b949e' } } },
                    scales: {
                        x: { ticks: { color: '#8b949e' }, grid: { color: '#30363d' } },
                        y: { type: 'linear', position: 'left', title: { display: true, text: 'S&P 500', color: '#58a6ff' }, ticks: { color: '#58a6ff' } },
                        y2: { type: 'linear', position: 'right', title: { display: true, text: 'CO2 (ì–µí†¤)', color: '#ff7b72' }, ticks: { color: '#ff7b72' }, grid: { display: false } }
                    }
                }
            });
        }

        function createRenewableChart() {
            var ctx = document.getElementById('renewableChart').getContext('2d');
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: fullYears,
                    datasets: [{
                        label: 'ì¬ìƒì—ë„ˆì§€ ë¹„ìœ¨ (%)',
                        data: renewablePercent,
                        borderColor: '#3fb950',
                        backgroundColor: 'rgba(63, 185, 80, 0.1)',
                        borderWidth: 3,
                        fill: true,
                        tension: 0.4
                    }]
                },
                options: getChartOptions('ì—°ë„', 'ì¬ìƒì—ë„ˆì§€ ë¹„ìœ¨ (%)')
            });
        }

        function createEnergyMixChart() {
            var ctx = document.getElementById('energyMixChart').getContext('2d');
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: fullYears,
                    datasets: [
                        {
                            label: 'ì¬ìƒì—ë„ˆì§€',
                            data: renewablePercent,
                            borderColor: '#3fb950',
                            borderWidth: 3,
                            fill: false
                        },
                        {
                            label: 'í™”ì„ì—°ë£Œ',
                            data: fossilPercent,
                            borderColor: '#ff7b72',
                            borderWidth: 3,
                            fill: false
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: true, labels: { color: '#8b949e' } } },
                    scales: {
                        x: { ticks: { color: '#8b949e' }, grid: { color: '#30363d' } },
                        y: { title: { display: true, text: 'ë¹„ìœ¨ (%)', color: '#8b949e' }, ticks: { color: '#8b949e' }, grid: { color: '#30363d' } }
                    }
                }
            });
        }

        function createDamageChart() {
            var ctx = document.getElementById('damageChart').getContext('2d');
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: fullYears,
                    datasets: [{
                        label: 'ì¬í•´ í”¼í•´ì•¡ (ì–µ ë‹¬ëŸ¬)',
                        data: disasterDamage,
                        backgroundColor: 'rgba(255, 166, 87, 0.7)',
                        borderColor: '#ffa657',
                        borderWidth: 2
                    }]
                },
                options: getChartOptions('ì—°ë„', 'í”¼í•´ì•¡ (ì–µ ë‹¬ëŸ¬)')
            });
        }

        function createDisasterCountChart() {
            var ctx = document.getElementById('disasterCountChart').getContext('2d');
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: fullYears,
                    datasets: [{
                        label: 'ì¬í•´ ë°œìƒ ê±´ìˆ˜',
                        data: disasterCount,
                        borderColor: '#ffa657',
                        backgroundColor: 'rgba(255, 166, 87, 0.1)',
                        borderWidth: 3,
                        fill: true,
                        tension: 0.4
                    }]
                },
                options: getChartOptions('ì—°ë„', 'ë°œìƒ ê±´ìˆ˜')
            });
        }

        function createDisasterTypeChart() {
            var ctx = document.getElementById('disasterTypeChart').getContext('2d');
            new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['í™ìˆ˜', 'í­ì—¼', 'ê°€ë­„', 'íƒœí’/í—ˆë¦¬ì¼€ì¸', 'ì‚°ë¶ˆ', 'ê¸°íƒ€'],
                    datasets: [{
                        data: [32, 24, 18, 15, 8, 3],
                        backgroundColor: ['#58a6ff', '#ff7b72', '#ffa657', '#bc8cff', '#3fb950', '#39c5cf']
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: true, position: 'bottom', labels: { color: '#8b949e', padding: 15 } }
                    }
                }
            });
        }

        function createFinanceChart() {
            var ctx = document.getElementById('financeChart').getContext('2d');
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: fullYears,
                    datasets: [{
                        label: 'ê¸°í›„ ê¸ˆìœµ (ì–µ ë‹¬ëŸ¬)',
                        data: climateFinance,
                        backgroundColor: 'rgba(88, 166, 255, 0.7)',
                        borderColor: '#58a6ff',
                        borderWidth: 2
                    }]
                },
                options: getChartOptions('ì—°ë„', 'íˆ¬ìì•¡ (ì–µ ë‹¬ëŸ¬)')
            });
        }

        function createFinanceVsDamageChart() {
            var ctx = document.getElementById('financeVsDamageChart').getContext('2d');
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: fullYears,
                    datasets: [
                        {
                            label: 'ê¸°í›„ íˆ¬ì',
                            data: climateFinance,
                            borderColor: '#58a6ff',
                            borderWidth: 3,
                            fill: false
                        },
                        {
                            label: 'ì¬í•´ í”¼í•´',
                            data: disasterDamage,
                            borderColor: '#ff7b72',
                            borderWidth: 3,
                            fill: false
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: true, labels: { color: '#8b949e' } } },
                    scales: {
                        x: { ticks: { color: '#8b949e' }, grid: { color: '#30363d' } },
                        y: { title: { display: true, text: 'ê¸ˆì•¡ (ì–µ ë‹¬ëŸ¬)', color: '#8b949e' }, ticks: { color: '#8b949e' }, grid: { color: '#30363d' } }
                    }
                }
            });
        }

        function getChartOptions(xLabel, yLabel) {
            return {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { display: false },
                    tooltip: {
                        backgroundColor: '#1d2433',
                        titleColor: '#e6edf3',
                        bodyColor: '#8b949e',
                        borderColor: '#30363d',
                        borderWidth: 1,
                        padding: 12
                    }
                },
                scales: {
                    x: {
                        title: { display: true, text: xLabel, color: '#8b949e' },
                        grid: { color: '#30363d' },
                        ticks: { color: '#8b949e' }
                    },
                    y: {
                        title: { display: true, text: yLabel, color: '#8b949e' },
                        grid: { color: '#30363d' },
                        ticks: { color: '#8b949e' }
                    }
                }
            };
        }

        document.querySelectorAll('.tab-btn').forEach(function(btn) {
            btn.addEventListener('click', function() {
                document.querySelectorAll('.tab-btn').forEach(function(b) { b.classList.remove('active'); });
                document.querySelectorAll('.tab-content').forEach(function(c) { c.classList.remove('active'); });
                
                this.classList.add('active');
                var tabId = this.dataset.tab;
                document.getElementById(tabId).classList.add('active');
                
                if (tabId === 'emissions' && !co2Chart) {
                    createCO2Chart();
                    createCO2MarketChart();
                }
                if (tabId === 'energy') {
                    createRenewableChart();
                    createEnergyMixChart();
                }
                if (tabId === 'disasters') {
                    createDamageChart();
                    createDisasterCountChart();
                    createDisasterTypeChart();
                }
                if (tabId === 'finance') {
                    createFinanceChart();
                    createFinanceVsDamageChart();
                }
            });
        });

        document.querySelectorAll('.btn[data-range]').forEach(function(btn) {
            btn.addEventListener('click', function() {
                var siblings = this.parentElement.querySelectorAll('.btn');
                siblings.forEach(function(b) { b.classList.remove('active'); });
                this.classList.add('active');

                var range = this.dataset.range;
                var years, sp500, nasdaq, dow, temp;

                if (range === 'recent') {
                    years = fullYears.slice(-10);
                    sp500 = sp500Data.slice(-10);
                    nasdaq = nasdaqData.slice(-10);
                    dow = dowData.slice(-10);
                    temp = globalTemp.slice(-10);
                } else if (range === 'decade') {
                    var start = 1990 - 1985;
                    var end = 2000 - 1985;
                    years = fullYears.slice(start, end);
                    sp500 = sp500Data.slice(start, end);
                    nasdaq = nasdaqData.slice(start, end);
                    dow = dowData.slice(start, end);
                    temp = globalTemp.slice(start, end);
                } else if (range === '2000s') {
                    var start = 2000 - 1985;
                    var end = 2010 - 1985;
                    years = fullYears.slice(start, end);
                    sp500 = sp500Data.slice(start, end);
                    nasdaq = nasdaqData.slice(start, end);
                    dow = dowData.slice(start, end);
                    temp = globalTemp.slice(start, end);
                } else {
                    years = fullYears;
                    sp500 = sp500Data;
                    nasdaq = nasdaqData;
                    dow = dowData;
                    temp = globalTemp;
                }

                mainChart.data.labels = years;
                mainChart.data.datasets[0].data = sp500;
                mainChart.data.datasets[1].data = nasdaq;
                mainChart.data.datasets[2].data = dow;
                mainChart.data.datasets[3].data = temp;
                mainChart.update();
            });
        });

        window.addEventListener('DOMContentLoaded', function() {
            createMainChart();
        });
    </script>
</body>
</html>
